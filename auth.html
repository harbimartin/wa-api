<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="favicon.ico">
    <script type="application/javascript" src="qrcode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <title>Whatsapp PT. KBS</title>
</head>
<body class="bg-black">
    <div class="px-4 text-xl md:text-3xl font-semibold text-white flex" style="background:rgb(0, 128, 105); height:30vh;">
        <div class="flex" style="height:18vh;">
            <div class="my-auto md:ml-16">Whatsapp Integration System (WIS) PT. Krakatau International Port</div>
        </div>
    </div>
    <div class="p-4 lg:py-12 lg:px-16 md:mt-5 text-sm md:text-base bg-white md:grid md:grid-cols-2 md:rounded shadow-2xl mx-auto" style="margin-top:-12vh; max-width:1112px;">
        <div class="mx-auto">
            <p class="md:font-light md:text-2xl">Anda dapat mengirim pesan server-side dengan mengirim <strong>POST Method</strong> HTTP Request melalui endpoint :</p>
            <div class="flex">
                <div id="link" class="font-semibold mx-auto bg-green-50 text-green-900 px-3 py-2 rounded-md border-green-300 border"></div>
            </div>
            <p>Dengan Parameter :</p>
            <div class="md:text-base md:w-1/2 md:ml-5">
                <div>
                    <div class="md:inline-flex w-full">
                        <div class="w-20 mr-5 my-auto flex">
                            <div class="my-auto mr-2 rounded-full bg-black" style="min-width: .4rem; min-height:.4rem;"></div>
                            <div class="mb-auto">pnumber</div>
                        </div>
                        <pre class="text-xs my-auto p-1 bg-yellow-100">Nomor Telepon dengan tanpa + (tambah), <br class="lg:hidden">contoh 6285711481919</pre>
                    </div>
                </div>
                <div>
                    <div class="md:inline-flex w-full">
                        <div class="w-20 mr-5 mb-auto flex">
                            <div class="my-auto mr-2 rounded-full bg-black" style="min-width: .4rem; min-height:.4rem;"></div>
                            <div>message</div>
                        </div>
                        <pre class="text-xs my-auto p-1 bg-yellow-100">Isi Pesan</pre>
                    </div>
                </div>
            </div>
        </div>
        <div class="mx-auto">
            <div class="flex mt-8 md:mt-0">
                <div class="mx-auto bg-white p-5 rounded-md border-green-700 border-2" id="qrcode"></div>
            </div>
            <div class="flex">
                <div class="mx-auto text-sm text-center bg-green-50 px-5 py-2" id="qrcode">
                    Anda belum Login!<br> Scan QR ini untuk Login, dan lakukan refresh.
                </div>
            </div>
        </div>
    </div>
    <script type="application/javascript">
        document.getElementById('link').innerHTML = window.location.origin + '/sendMessage';
        var url_string = window.location.href
        var url = new URL(url_string);
        var c = url.searchParams.get("msg");
        
        fetch(window.location.origin + '/getStatus')
            .then(response => response.text())
            .then(data => {
                new QRCode(document.getElementById("qrcode"), data);
            });
    </script>
</body>
</html>
